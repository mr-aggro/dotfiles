from itertools import chain
import sys

from fontTools.ttLib import TTFont
from fontTools.unicode import Unicode
import subprocess
cmd = 'fc-list'
output = subprocess.Popen(cmd, stdout=subprocess.PIPE).communicate()
a = output[0].decode("UTF-8").split('\n')
fc_list = []
for item in a:
    font = item.split(": ")[0]
    if ".ttf" in font:
        fc_list.append(font)
        # print(font)
# a = str(output)
# print("a",a)
# print(len(fc_list))
count=0
# fc_list = ["/usr/share/fonts/Unifont/Unifont_Upper.ttf"]
for font in fc_list:
    ttf = TTFont(font, recalcBBoxes=False)
    # print(ttf.getBestCmap())
    # print(ttf.getGlyphSet().keys())
    # for x in ttf
    # chars = chain.from_iterable([y + (Unicode[y[0]],) for y in x.cmap.items()] for x in ttf["cmap"].tables)
    # print(list(chars))
    # Use this for just checking if the font contains the codepoint given as
    # second argument:
    char = ord(sys.argv[1])
    # char = ord("ðŸŒ¡")
    # print(Unicode[char])
    count += 1
    # print(count,' ', font)
    if char in ttf.getBestCmap().keys():
    # if char in (x[0] for x in chars):
        print("-->", font)
    ttf.close()
